<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="./output.css" rel="stylesheet" />
  </head>
  <body>
    <div class="p-8">
      <h1 class="text-2xl font-bold text-clifford">Weather</h1>
      <p><a href="index.html">index</a> | <a href="all.html">log</a></p>
      <p>
        latitude: <span id="lat"></span>°<br />
        longitude: <span id="lon"></span>°<br />
      </p>
      <p><span id="city"></span><br /></p>
      <p><span id="img_weatherIcon"></span><br /></p>
      <p>
        The weather here is <span id="summary"></span> with a temperature of
        <span id="temperature"></span>&deg; F.
      </p>
      <p class="pb-2">
        Air quality data is available from <span id="aq_city"></span><br />
        The concentration of particulate matter (<span id="aq_parameter"></span>) is
        <span id="aq_value"></span> <span id="aq_units"></span> last read on
        <span id="aq_date"></span>.
      </p>

      <button
        class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"
        type="submit"
        onclick="isEmptyObject(weatherData.coordinates) ? 
        null : 
        saveLocation(weatherData.coordinates.lat, weatherData.coordinates.lon)"
      >
        Save Location
      </button>
    </div>

    <script src="functions.js" type="text/javascript"></script>
    <script async>
      let weatherData = (async () => {
        const data = await getWeatherData();
        console.log("data:", data);
        await getAirQualityData(data.atmoDataObject);

        return data;
      })();

      weatherData.then((resolvedValue) => {
        weatherData = resolvedValue;
      });
    </script>
  </body>
</html>
